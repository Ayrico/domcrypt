<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
     <script src="demo.js" type="text/javascript"></script>
     <style>
       body { font-family: sans-serif; font-size: 1em; }
       .key { font-family: monospace; font-size: 0.8em; color: green; }
       #decrypted { color: blue; }
       #encrypted { color: red; }
       div { margin: 0.3em; padding: 0.2em; }
       h1 { font-size: 1.3em; }
       h2 { font-size: 1.2em; }
       h3 { font-size: 1em; }
       li { margin-top: 0.4em; }
       .bold { font-weight: bold; }
     </style>
  </head>
  <body>
    <h1>DOMCrypt Demo</h1>
    <div id="explanation">DOMCrypt is a Firefox extension that adds 'window.crypt' to each browser window. With 'crypt', you can generate a public and private key pair, encrypt data and decrypt data. All of the encryption operations are handled by low-level NSS libraries written in C. This is not a javascript-in-content solution. (<a href="http://www.mozilla.org/projects/security/pki/nss/">NSS</a> handles all of the SSL operations in many modern browsers.)
      <div>See <a href="https://github.com/daviddahl/domcrypt">https://github.com/daviddahl/domcrypt</a> for source code</div>
      <h2>Try out the demo:</h2>
      <ul>
        <li class="bold">Firefox 4 <a href="http://www.mozilla.com/en-US/firefox/">Firefox 4</a> or <a href="http://nightly.mozilla.org/">nightly</a> required</li>
        <li><a href="../extension/built/domcrypt.xpi">Install the extension</a> and restart your browser.</li>
        <li>Load this page and follow the next 3 steps:</li>
      </ul>
    </div>
    <div id="generate">
      <h2>1. Generate the key pair</h2>
      <div>
        <button onclick="generate();">Generate Key Pair</button>
      </div>
      <h3>Public key</h3>
      <div class="key" id="pubKey">...</div>
    </div>

    <div id="encrypt">
      <h2>2. Encrypt the message</h2>
      <textarea id="plaintext" rows="3" cols="50">This is a plaintext message.</textarea> <button onclick="encrypt();">Encrypt</button>
      <h3>Encrypted text</h3>
      <div id="encrypted">...</div>
    </div>
    
    <div id="decrypt">
      <h2>3. Decrypt the cipher text</h2>
      <h3>Decrypted text</h3>
      <button onclick="decrypt();">Decrypt</button>
       <div id="decrypted"></div>
    </div>
    <div>Run the <a href="get-pub-key.html">Addressbook Demo</a></div>
    <div>
      <h2>Latest Developments</h2>
      <ul>
        <li>JSON data persistence for a user's default encryption credentials - not accessible to the DOM or content JS (only the Public Key is, of course.)</li>
      </ul>
    </div>

    <div id="next">
      <h2>Next steps</h2>
      <ul>
        <li>Data persistence via IndexedDB, JSON,  localStorage, Sync, new APIs</li>
        <li>Address Book server to make public key discovery trivial</li>
        <li>Messaging (secure 'email' and 'status' feeds) client and server</li>
        <li>Evangelism: get this functionality into browsers</li>
      </ul>
    </div>
    <div class="key">Last update: 2011-02-11</div>
  </body>
</html>
